<mujoco model="g2_eval">
  <option timestep="0.001" cone="elliptic" integrator="implicitfast" />

  <!-- 只有一个顶层 default，命名类用“嵌套 default”定义 -->
  <default>
    <joint  limited="true" damping="0.01" armature="0.01" frictionloss="0.001"/>
    <geom   condim="4" contype="1" conaffinity="15" friction="0.7 0.02 0.001" solref="0.005 1"/>
    <motor  ctrllimited="true"/>
    <equality solref="0.002 1"/>

    <!-- 定义可复用的类：lego -->
    <default class="lego">
      <geom solimp="0.98 0.999 0.0001" solref="0.004 1" friction="0.8 0.02 0.001"/>
    </default>

    <!-- 如果下面的 geom 用了 class="visualgeom"，也在这里定义一个同名类 -->
    <default class="visualgeom">
      <geom material="visualgeom" condim="1" contype="0" conaffinity="0"/>
    </default>
  </default>


  <!-- sdflib（LEGO 的 SDF） -->
  <extension>
    <plugin plugin="mujoco.sdf.sdflib">
      <instance name="sdflego">
        <config key="aabb" value="0"/>
      </instance>
    </plugin>
  </extension>

  <asset>
    <!-- 你的夹爪 STL（保持你原来的文件名即可） -->
    <mesh name="base_link"  file="base_link.STL"/>
    <mesh name="left_link"  file="left_link.STL"/>
    <mesh name="right_link" file="right_link.STL"/>

    <!-- LEGO 网格（按 1cm 缩放），挂上 sdflib 插件 -->
    <mesh name="lego" file="lego.obj" scale="0.01 0.01 0.01">
      <plugin instance="sdflego"/>
    </mesh>

    <material name="visualgeom" rgba="0.5 0.9 0.2 1"/>
  </asset>

  <!-- 额外给 LEGO 稍软的接触参数（低颤动） -->
  <default class="lego">
    <geom solimp="0.98 0.999 0.0001" solref="0.004 1" friction="0.8 0.02 0.001"/>
  </default>

  <worldbody>
    <geom name="ground" type="plane" size="1 1 0.02" rgba="0.8 0.8 0.8 1"
          contype="1" conaffinity="1"/>

    <body name="palm" pos="0 0 0.5">
      <joint name="x"    type="slide" axis="1 0 0" range="-0.25 0.25"/>
      <joint name="y"    type="slide" axis="0 1 0" range="-0.25 0.25"/>
      <joint name="lift" type="slide" axis="0 0 1" range="-0.5 0.50"/>
      <joint name="yaw"  type="hinge" axis="0 0 1" limited="true" range="-3.1416 3.1416"/>

      <geom type="box" size="0.1 0.1 0.01" rgba="0.2 0.2 0.8 0.2"/>

      <body name="base" pos="0 0 0" quat="0 1 0 0">
        <site name="imu" size="0.01" pos="0 0 0"/>
        <geom type="mesh" mesh="base_link" rgba="0.8 0.8 0.8 1" class="visualgeom"/>

        <body name="left_link" pos="0 0 0.0635" quat="0.707105 0 -0.707108 0">
          <joint name="left_joint" pos="0 0 0" axis="0 0 1" type="slide" range="0 0.0166"/>
          <geom type="mesh" mesh="left_link"  rgba="0.85 0.85 0.85 1"/>
        </body>

        <body name="right_link" pos="0 0 0.0635" quat="-2.59734e-06 0.707105 2.59735e-06 0.707108">
          <joint name="right_joint" pos="0 0 0" axis="0 0 1" type="slide" range="0 0.0166"/>
          <geom type="mesh" mesh="right_link" rgba="0.85 0.85 0.85 1"/>
        </body>
      </body>
    </body>
    <body name="lego_00" pos="-0.10 0.00 0.02" childclass="lego">
      <freejoint/>
      <geom type="sdf" name="lego_00_geom" mesh="lego" rgba="0.9 0.3 0.1 1">
        <plugin instance="sdflego"/>
      </geom>
    </body>

    <body name="lego_01" pos="-0.06 0.02 0.02" childclass="lego">
      <freejoint/>
      <geom type="sdf" name="lego_01_geom" mesh="lego" rgba="0.2 0.7 0.2 1">
        <plugin instance="sdflego"/>
      </geom>
    </body>

    <body name="lego_02" pos="-0.02 -0.03 0.02" childclass="lego">
      <freejoint/>
      <geom type="sdf" name="lego_02_geom" mesh="lego" rgba="0.2 0.5 0.9 1">
        <plugin instance="sdflego"/>
      </geom>
    </body>


  </worldbody>

  <!-- 手指对称（和你原来的保持一致） -->
  <equality>
    <joint joint1="right_joint" joint2="left_joint"/>
  </equality>

  <tendon>
    <fixed name="grasp">
      <joint joint="right_joint" coef="1"/>
      <joint joint="left_joint"  coef="1"/>
    </fixed>
  </tendon>

  <!-- actuator 名字必须与脚本一致 -->
  <actuator>
    <motor name="left_joint"  joint="left_joint"  ctrlrange="-1 1" gear="1"/>
    <motor name="right_joint" joint="right_joint" ctrlrange="-1 1" gear="1"/>
    <position name="x"        joint="x"    kp="800"  dampratio="1" ctrlrange="-0.25 0.25"/>
    <position name="y"        joint="y"    kp="800"  dampratio="1" ctrlrange="-0.25 0.25"/>
    <position name="lift"     joint="lift" kp="600"  dampratio="1" ctrlrange="-0.5 0.5"/>
    <position name="rotation" joint="yaw"  kp="2000" dampratio="1"
              ctrlrange="-3.1416 3.1416" forcerange="-1000 1000" gear="1"/>
  </actuator>

  <sensor>
    <actuatorpos name="left_joint_p"  actuator="left_joint"/>
    <actuatorpos name="right_joint_p" actuator="right_joint"/>
    <actuatorfrc name="left_joint_f"  actuator="left_joint"/>
    <actuatorfrc name="right_joint_f" actuator="right_joint"/>
    <framequat   name="orientation" objtype="site" objname="imu"/>
  </sensor>
</mujoco>
